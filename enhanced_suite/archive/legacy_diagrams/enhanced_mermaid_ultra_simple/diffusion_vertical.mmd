%% Vertical Multi-Column Diffusion Process - 16:9 Layout
graph TB
    subgraph "ğŸ“ˆ FORWARD COLUMN"
        A1["ğŸ“ˆ Forward Process<br/>q(xâ‚œ|xâ‚€)<br/>Noise addition"]
        A2["ğŸ“Š Initial State<br/>xâ‚€: Clean radio<br/>320Ã—320Ã—1"]
        A3["ğŸ”„ Noise Schedule<br/>Î²: 0.0001â†’0.02<br/>1000 steps"]
        A4["ğŸ¯ Final State<br/>x_T: Pure noise<br/>N(0, I)"]
        
        A1 --> A2
        A2 --> A3
        A3 --> A4
    end
    
    subgraph "ğŸ”„ REVERSE COLUMN"
        B1["ğŸ”„ Reverse Process<br/>p_Î¸(xâ‚œâ‚‹â‚|xâ‚œ, c)<br/>Denoising"]
        B2["ğŸ“Š Input State<br/>xâ‚œ: Noisy data<br/>t = T, T-1, ..., 1"]
        B3["ğŸ”§ U-Net Prediction<br/>Îµ_Î¸(xâ‚œ, t, c)<br/>Noise estimate"]
        B4["ğŸ¯ Output State<br/>xâ‚€: Clean result<br/>Reconstructed"]
        
        B1 --> B2
        B2 --> B3
        B3 --> B4
    end
    
    subgraph "ğŸ¯ KNOWLEDGE COLUMN"
        C1["ğŸ¯ Knowledge-Aware<br/>pred_KC<br/>Physics objective"]
        C2["ğŸ“Š Loss Function<br/>L_KC = E||Îµ - Îµ_Î¸||Â²<br/>MSE loss"]
        C3["ğŸ”§ EM Constraints<br/>Domain knowledge<br/>Radio physics"]
        C4["ğŸ“ˆ Benefits<br/>1000Ã— speedup<br/>Real-time"]
        
        C1 --> C2
        C2 --> C3
        C3 --> C4
    end
    
    subgraph "âš¡ MATHEMATICAL COLUMN"
        D1["âš¡ Forward Math<br/>xâ‚œ = âˆšÎ±Ì„â‚œxâ‚€ + âˆš(1-Î±Ì„â‚œ)Îµ<br/>Conditional Gaussian"]
        D2["ğŸ”§ Condition Integration<br/>c: Building layout<br/>Spatial info"]
        D3["ğŸ“Š Reverse Math<br/>xâ‚œâ‚‹â‚ = f(xâ‚œ, Îµ_Î¸)<br/>Learned reverse"]
        D4["ğŸ¯ Single-Step<br/>No fieldæµ‹é‡<br/>Cost-effective"]
        
        D1 --> D2
        D2 --> D3
        D3 --> D4
    end
    
    %% Column connections
    A4 --> B1
    B4 --> C1
    C4 --> D1
    
    %% Style columns with different colors
    style A1 fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    style B1 fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
    style C1 fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    style D1 fill:#E8F5E8,stroke:#388E3C,stroke-width:2px