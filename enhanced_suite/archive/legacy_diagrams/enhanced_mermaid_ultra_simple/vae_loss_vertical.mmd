%% Vertical Multi-Column VAE Loss Architecture - 16:9 Layout
graph TB
    subgraph "ğŸ¯ INPUT COLUMN"
        A1["ğŸ¯ Ground Truth<br/>x: 320Ã—320Ã—1<br/>Original"]
        A2["ğŸ”„ Reconstruction<br/>xÌ‚: 320Ã—320Ã—1<br/>Generated"]
        A3["ğŸ“Š Comparison<br/>x vs xÌ‚<br/>Quality assess"]
        
        A1 --> A2
        A2 --> A3
    end
    
    subgraph "ğŸ“Š RECONSTRUCTION COLUMN"
        B1["ğŸ“Š L1 Loss<br/>|x - xÌ‚|â‚<br/>Robust"]
        B2["ğŸ“Š L2 Loss<br/>|x - xÌ‚|â‚‚Â²<br/>Sensitive"]
        B3["âš–ï¸ Combined Loss<br/>Î»â‚L1 + Î»â‚‚L2<br/>Balanced"]
        B4["ğŸ“ˆ Reconstruction Error<br/>Quality metric"]
        
        B1 --> B2
        B2 --> B3
        B3 --> B4
    end
    
    subgraph "ğŸ”§ REGULARIZATION COLUMN"
        C1["ğŸ“Š Encoder q_Ï†<br/>N(Î¼, ÏƒÂ²)<br/>Posterior"]
        C2["ğŸ“Š Prior p(z)<br/>N(0, I)<br/>Standard"]
        C3["ğŸ“ˆ KL Divergence<br/>KL[q||p]<br/>Information"]
        C4["ğŸ”§ Regularized KL<br/>Î»_KL Ã— KL<br/>Trade-off"]
        
        C1 --> C2
        C2 --> C3
        C3 --> C4
    end
    
    subgraph "ğŸ¯ OPTIMIZATION COLUMN"
        D1["ğŸ¯ ELBO Objective<br/>E[log p] - KL<br/>Evidence lower bound"]
        D2["âš–ï¸ Total Loss<br/>L_VAE = L_rec + Î»_KL Ã— L_KL<br/>Complete objective"]
        D3["ğŸ“ˆ Optimization<br/>max_Î¸,Ï† ELBO<br/>Parameter learning"]
        D4["ğŸ”„ Training<br/>Backpropagation<br/>Gradient descent"]
        
        D1 --> D2
        D2 --> D3
        D3 --> D4
    end
    
    %% Column connections
    A3 --> B1
    B4 --> D1
    C4 --> D1
    
    %% Style columns with different colors
    style A1 fill:#FFEBEE,stroke:#D32F2F,stroke-width:2px
    style B1 fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    style C1 fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
    style D1 fill:#E8F5E8,stroke:#388E3C,stroke-width:2px