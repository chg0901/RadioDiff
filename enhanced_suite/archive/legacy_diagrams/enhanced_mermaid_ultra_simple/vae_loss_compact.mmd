%% Compact VAE Loss Architecture - Horizontal Layout
graph TB
    A[["ğŸ¯ Ground Truth<br/>x: 320Ã—320Ã—1"]] --> B[["ğŸ”„ Reconstruction<br/>xÌ‚: 320Ã—320Ã—1"]]
    B --> C[["ğŸ“Š L1 Loss<br/>|x - xÌ‚|â‚"]]
    B --> D[["ğŸ“Š L2 Loss<br/>|x - xÌ‚|â‚‚Â²"]]
    C --> E[["âš–ï¸ Combined<br/>Î»â‚L1 + Î»â‚‚L2"]]
    D --> E
    
    F[["ğŸ“Š Encoder q_Ï†<br/>N(Î¼, ÏƒÂ²)"]] --> G[["ğŸ“Š Prior p(z)<br/>N(0, I)"]]
    G --> H[["ğŸ“ˆ KL Divergence<br/>KL[q||p]"]]
    H --> I[["ğŸ”§ Regularization<br/>Î»_KL Ã— KL"]]
    
    J[["ğŸ¯ ELBO<br/>E[log p] - KL"]] --> K[["âš–ï¸ Total Loss<br/>L_VAE = L_rec + Î»_KL Ã— L_KL"]]
    K --> L[["ğŸ“ˆ Optimization<br/>max_Î¸,Ï† ELBO"]]
    
    E --> J
    I --> J
    
    style A fill:#FFEBEE,stroke:#D32F2F,stroke-width:2px
    style F fill:#E3F2FD,stroke:#1976D2,stroke-width:2px
    style J fill:#E8F5E8,stroke:#388E3C,stroke-width:2px