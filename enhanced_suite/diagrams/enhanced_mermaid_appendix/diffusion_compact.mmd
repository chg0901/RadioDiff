%% Compact Three-Column Diffusion Process - Optimized Layout
graph TB
    subgraph "ğŸ“ˆ FORWARD DIFFUSION"
        A[["xâ‚€: Clean<br/>Radio map"]] --> B[["Î²: 0.0001â†’0.02<br/>1000 steps"]]
        B --> C[["Îµ ~ N(0, I)<br/>Noise add"]]
        C --> D[["xâ‚œ = âˆšÎ±Ì„â‚œxâ‚€ + âˆš(1-Î±Ì„â‚œ)Îµ<br/>Noisy data"]]
        D --> E[["q(xâ‚œ|xâ‚€)<br/>Conditional Gaussian"]]
        E --> F[["x_T: Pure noise<br/>N(0, I)"]]
    end
    
    subgraph "ğŸ”„ REVERSE DIFFUSION"
        G[["xâ‚œ: Noisy input<br/>t = T, T-1, ..., 1"]] --> H[["c: Building layout<br/>Condition"]]
        H --> I[["Îµ_Î¸(xâ‚œ, t, c)<br/>U-Net predict"]]
        I --> J[["xâ‚œâ‚‹â‚ = f(xâ‚œ, Îµ_Î¸)<br/>Denoise"]]
        J --> K[["p_Î¸(xâ‚œâ‚‹â‚|xâ‚œ, c)<br/>Learned reverse"]]
        K --> L[["xâ‚€: Clean output<br/>Result"]]
    end
    
    subgraph "ğŸ¯ KNOWLEDGE-AWARE"
        M[["pred_KC<br/>Physics objective"]] --> N[["L_KC = E||Îµ - Îµ_Î¸||Â²<br/>MSE loss"]]
        N --> O[["EM constraints<br/>Domain knowledge"]]
        O --> P[["Single-step<br/>Real-time"]]
        P --> Q[["1000Ã— speedup<br/>Efficient"]]
        Q --> R[["No fieldæµ‹é‡<br/>Cost-effective"]]
    end
    
    style A fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    style G fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
    style M fill:#E3F2FD,stroke:#1976D2,stroke-width:2px